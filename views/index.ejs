<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="script.js"></script>
    <link rel="stylesheet" href="/output.css" />
    <title>Mini Message Board</title>
  </head>
  <body class="p-4 bg-color-white dark:bg-gray-900">
    <header
      class="flex justify-between flex-col sm:flex-row items-start sm:items-center w-full mx-auto md:w-5/6 lg:w-1/2"
    >
      <h1
        class="font-bold text-3xl mt-8 mb-6 sm:my-8 text-black dark:text-white"
      >
        <%= title %>
      </h1>
      <form
        class="max-w-60 bg-gray-100 dark:bg-slate-700 p-2 rounded-3xl mb-8 sm:mb-0"
        method="GET"
        action="/search"
      >
        <div class="flex items-center">
          <input type="checkbox" id="toggleSearch" class="peer hidden" />

          <label
            for="toggleSearch"
            class="flex items-center space-x-2 px-2 cursor-pointer"
          >
            <svg
              class="peer dark:fill-gray-200 fill-gray-700"
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#CCCCCC"
            >
              <path
                d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"
              />
            </svg>
          </label>

          <input
            class="self-center hidden peer-checked:block w-full outline-2 outline-blue-400 rounded-2xl px-2 py-1 text-gray-800 dark:text-gray-100"
            type="search"
            name="query"
            id="search"
          />
        </div>
      </form>
      <button
        class="bg-gray-300 dark:bg-gray-600 group my-4 hover:bg-gray-50 p-2 rounded-full opacity-70 fixed z-20 left-1/2 -translate-x-1/2"
        onclick="window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'})"
      >
        <svg
          class="group-hover:fill-slate-900 fill-slate-700 dark:fill-gray-200"
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
        >
          <path
            d="M440-800v487L216-537l-56 57 320 320 320-320-56-57-224 224v-487h-80Z"
          />
        </svg>
      </button>
    </header>

    <div
      aria-hidden="true"
      class="absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80"
    >
      <div
        style="
          clip-path: polygon(
            74.1% 44.1%,
            100% 61.6%,
            97.5% 26.9%,
            85.5% 0.1%,
            80.7% 2%,
            72.5% 32.5%,
            60.2% 62.4%,
            52.4% 68.1%,
            47.5% 58.3%,
            45.2% 34.5%,
            27.5% 76.7%,
            0.1% 64.9%,
            17.9% 100%,
            27.6% 76.8%,
            76.1% 97.7%,
            74.1% 44.1%
          );
        "
        class="relative left-[calc(50%-11rem)] aspect-1155/678 w-144.5 -translate-x-1/2 rotate-30 bg-linear-to-tr from-[#ea97ba] to-[#9995dc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-288.75"
      ></div>
    </div>

    <main class="w-full mx-auto md:w-5/6 lg:w-1/2 my-6">
      <a class="text-lg bg-green-600 rounded text-white px-4 py-2" href="/new"
        >Add a message</a
      >

      <ul
        class="mx-auto my-8 flex flex-col gap-4 shadow-md rounded p-4 bg-white dark:bg-gray-800 opacity-80"
      >
        <% messages.map(message => { %>

        <li
          class="px-8 py-4 bg-slate-50 rounded relative border-2 border-slate-400 border-dashed dark:bg-gray-700"
        >
          <h3 class="text-lg font-medium text-black dark:text-white">
            <%= message.user %>
          </h3>

          <p
            class="text-gray my-4 break-words text-gray-700 dark:text-gray-300 line-clamp-2"
          >
            <%= message.content %>
          </p>

          <span class="font-light text-gray-500 dark:text-gray-200"
            ><%= message.added %></span
          >

          <a
            class="text-amber-600 dark:text-amber-300 underline block mt-4 md:absolute right-4 bottom-4"
            href="messages/<%= message.id %>"
            >Show Details</a
          >
        </li>
        <% }) %>
      </ul>
    </main>
    <div
      aria-hidden="true"
      class="absolute inset-x-0 top-[calc(100%-13rem)] -z-10 transform-gpu overflow-hidden blur-3xl sm:top-[calc(100%-30rem)]"
    >
      <div
        style="
          clip-path: polygon(
            74.1% 44.1%,
            100% 61.6%,
            97.5% 26.9%,
            85.5% 0.1%,
            80.7% 2%,
            72.5% 32.5%,
            60.2% 62.4%,
            52.4% 68.1%,
            47.5% 58.3%,
            45.2% 34.5%,
            27.5% 76.7%,
            0.1% 64.9%,
            17.9% 100%,
            27.6% 76.8%,
            76.1% 97.7%,
            74.1% 44.1%
          );
        "
        class="relative left-[calc(50%+3rem)] aspect-1155/678 w-144.5 -translate-x-1/2 bg-linear-to-tr from-[#ed96ba] to-[#9791e8] opacity-30 sm:left-[calc(50%+36rem)] sm:w-288.75"
      ></div>
    </div>
  </body>
</html>
